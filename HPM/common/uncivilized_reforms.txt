###############Unciv Reforms
economic_reforms = {
    land_reform = {
        no_land_reform = {
            farm_rgo_size = 0.25
            mine_rgo_size = 0.25
            core_pop_militancy_modifier = -0.005
        }
        yes_land_reform = {
            technology_cost = 10000
            farm_rgo_eff = 0.25
            mine_rgo_eff = 0.25
            civilization_progress_modifier = 0.15
            allow = { NOT = { has_country_flag = lacking_writing_system } }

            on_execute = {
                effect = {
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 0.5
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }
    admin_reform = {
        no_admin_reform = {
                core_pop_militancy_modifier = -0.005
        }
        yes_admin_reform = {
            technology_cost = 12000
            administrative_efficiency_modifier = 0.1
            civilization_progress_modifier = 0.15
            allow = { NOT = { has_country_flag = lacking_writing_system } }

            on_execute = {
                effect = {
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 0.5
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }
    finance_reform = {
        next_step_only = yes
        no_finance_reform = {
            max_loan_modifier = -1.0 # no loan 4 u
            core_pop_militancy_modifier = -0.005
        }
        yes_finance_reform = {
            technology_cost = 12000
            tax_efficiency = 0.1
            civilization_progress_modifier = 0.15
            max_loan_modifier = -1.0 # no loan 4 u
            allow = {
                NOT = { has_country_flag = lacking_writing_system }
                is_substate = no
            }

            on_execute = {
                effect = {
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 0.5
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
        finance_reform_two = {
            technology_cost = 18000
            tax_efficiency = 0.1
            civilization_progress_modifier = 0.35

            max_loan_modifier = -0.2 # 80% loans

            on_execute = {
                effect = {
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 0.5
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 0.5
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 2
                        }
                    }
                }
            }
        }
    }

    monetary_reform = {
        next_step_only = yes
        no_monetary_reform = {
        }
        yes_monetary_reform = {
            technology_cost = 12000
            tax_efficiency = 0.05
            civilization_progress_modifier = 0.15
            allow = { NOT = { has_country_flag = lacking_writing_system } }

            on_execute = {
                effect = {
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 0.5
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
        monetary_reform_two = {
            technology_cost = 18000
            tax_efficiency = 0.05
            civilization_progress_modifier = 0.25

            on_execute = {
                effect = {
                    activate_technology = no_standard
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 0.5
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 0.5
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 2
                        }
                    }
                }
            }
        }
    }


    education_reform = {
        no_education_reform = {
            core_pop_militancy_modifier = -0.005

        }
        yes_education_reform = {
            education_efficiency_modifier = 0.1
            technology_cost = 12500
            civilization_progress_modifier = 0.15
            allow = { NOT = { has_country_flag = lacking_writing_system } }

            on_execute = {
                effect = {
                    plurality = 5
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 0.5
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }

    research_reform = {
        no_research_reform = {

        }

        yes_research_reform = {
            technology_cost = 22000
            education_efficiency_modifier = 0.1
            civilization_progress_modifier = 0.25
            allow = { NOT = { has_country_flag = lacking_writing_system } }

            on_execute = {
                effect = {
                    plurality = 5
                    activate_technology = late_enlightenment_philosophy
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 0.5
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }

    transport_improv = {
        no_transport_improv = {
            core_pop_militancy_modifier = -0.005

        }
        yes_transport_improv = {
            technology_cost = 12000
            farm_rgo_eff = 0.25
            mine_rgo_eff = 0.25
            civilization_progress_modifier = 0.15
            allow = { NOT = { has_country_flag = lacking_writing_system } money = 2000 }

            on_execute = {
                trigger = {
                    can_build_railway_in_capital = {
                        in_whole_capital_state = yes # no = just in main capital province.
                        limit_to_world_greatest_level = yes
                    }
                }
                effect = {
                    treasury = -2000
                    set_country_flag = activate_experimental_railroad
                    activate_technology = experimental_railroad

                    build_railway_in_capital = {
                        in_whole_capital_state = yes # no = just in main capital province.
                        limit_to_world_greatest_level = yes
                    }

                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }

    firearms_production = {
        no_firearms_production = {

        }
        yes_firearms_production = {
            technology_cost = 12000
            civilization_progress_modifier = 0.15
            allow = { NOT = { has_country_flag = lacking_writing_system } money = 10000 }

            on_execute = {
                effect = {
                    treasury = -10000
                    activate_technology = guild_based_production
                    build_factory_in_capital_state = small_arms_factory


                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }

    pre_indust = {
        no_pre_indust = {
            core_pop_militancy_modifier = -0.005

        }
        yes_pre_indust = {
            technology_cost = 18000
            civilization_progress_modifier = 0.2
            allow = { NOT = { has_country_flag = lacking_writing_system } money = 2000 }

            on_execute = {
                trigger = { can_build_factory_in_capital_state = cement_factory # example, no trigger needed here

                }

                effect = {
                    treasury = -2000
                    build_factory_in_capital_state = cement_factory

                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }
    industrial_construction = {
        no_industrial_construction = {
            core_pop_militancy_modifier = -0.005

        }
        yes_industrial_construction = {
            technology_cost = 20000
            civilization_progress_modifier = 0.25
            allow = { NOT = { has_country_flag = lacking_writing_system } money = 7000 }

            on_execute = {
                effect = {
                    treasury = -7000
                    activate_technology = piston_steam_engine
                    build_factory_in_capital_state = fabric_factory

                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }
}

#Military Reforms
military_reforms = {
    foreign_training = {

        no_foreign_training = {
            core_pop_militancy_modifier = -0.005
        }
        yes_foreign_training = {
            #unit stats improve
            land_organisation = 0.1
            technology_cost = 9000
            civilization_progress_modifier = 0.1
            research_points_on_conquer = 0.25

            allow = {
                OR = {
                    ai = no
                    AND = {
                        has_country_flag = using_foreign_ships
                        has_country_flag = using_foreign_shipyards
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
                }
            }

            on_execute = {
                effect = {
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }
    foreign_weapons = {
        no_foreign_weapons = {
            core_pop_militancy_modifier = -0.005
        }
        yes_foreign_weapons = {
            land_defense_modifier = 0.1
            technology_cost = 11000
            civilization_progress_modifier = 0.1

            on_execute = {
                effect = {
                    activate_technology = flintlock_rifles
                    set_country_flag = using_foreign_weapons
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }

    military_constructions = {
        no_military_constructions = {
                core_pop_militancy_modifier = -0.005
        }
        yes_military_constructions = {
            technology_cost = 11000
            civilization_progress_modifier = 0.1
            allow = {
                NOT = { has_country_flag = lacking_writing_system }
                money = 2000
                OR = {
                    ai = no
                    AND = {
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
                }
            }

            on_execute = {
                trigger = {
                    can_build_fort_in_capital = {
                        in_whole_capital_state = no # no = just in main capital province.
                        limit_to_world_greatest_level = yes
                    }
                }
                effect = {
                    treasury = -2000
                    activate_technology = post_napoleonic_thought
                    build_fort_in_capital = {
                        in_whole_capital_state = no # no = just in main capital province.
                        limit_to_world_greatest_level = yes
                    }
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }
    foreign_officers = {
        no_foreign_officers = {
                core_pop_militancy_modifier = -0.005
        }
        yes_foreign_officers = {
            leadership_modifier = 0.1
            technology_cost = 11000
            civilization_progress_modifier = 0.1
            research_points_on_conquer = 0.25
            allow = {
                OR = {
                    ai = no
                    AND = {
                        has_country_flag = using_foreign_ships
                        has_country_flag = using_foreign_shipyards
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
                }
            }

            on_execute = {
                effect = {
                    activate_technology = military_staff_system
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }
    army_schools = {
        no_army_schools = {
                core_pop_militancy_modifier = -0.005
        }
        yes_army_schools = {
            land_unit_start_experience = 10
            technology_cost = 11000
            civilization_progress_modifier = 0.1
            allow = {
                NOT = { has_country_flag = lacking_writing_system }
                OR = {
                    ai = no
                    AND = {
                        has_country_flag = using_foreign_ships
                        has_country_flag = using_foreign_shipyards
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
                }
            }

            on_execute = {
                effect = {
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }
    foreign_naval_officers = {
        no_foreign_naval_officers = {
                core_pop_militancy_modifier = -0.005
        }
        yes_foreign_naval_officers = {
            tariff_efficiency_modifier = 0.2
            technology_cost = 12000
            civilization_progress_modifier = 0.1
            research_points_on_conquer = 0.25

            allow = {
                any_owned_province = { port = yes }
                OR = {
                    ai = no
                    AND = {
                        has_country_flag = using_foreign_ships
                        has_country_flag = using_foreign_shipyards
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
                }
            }

            on_execute = {
                effect = {
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }
    naval_schools = {
        no_naval_schools = {
                core_pop_militancy_modifier = -0.005
        }
        yes_naval_schools = {
            naval_unit_start_experience = 10
            technology_cost = 12000
            civilization_progress_modifier = 0.1
            research_points_on_conquer = 0.25

            allow = {
                NOT = { has_country_flag = lacking_writing_system }
                any_owned_province = { port = yes }
                OR = {
                    ai = no
                    AND = {
                        has_country_flag = using_foreign_ships
                        has_country_flag = using_foreign_shipyards
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
                }
            }

            on_execute = {
                effect = {
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }
    foreign_navies = {
        no_foreign_navies = {
                core_pop_militancy_modifier = -0.005
        }
        yes_foreign_navies = {
            naval_attack_modifier = 0.2
            naval_defense_modifier = 0.2
            technology_cost = 16000
            civilization_progress_modifier = 0.1

            allow = {
                any_owned_province = { has_building = naval_base }
                OR = {
                    ai = no
                    AND = {
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
                }
            }

            on_execute = {
                effect = {
                    activate_technology = clipper_design
                    activate_technology = steamers
                    set_country_flag = using_foreign_ships

                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }

    western_shipyards = {
        no_western_shipyards = {
        }

        yes_western_shipyards = {
            technology_cost = 12000
            civilization_progress_modifier = 0.1

            allow = {
                any_owned_province = { port = yes }
                OR = {
                    ai = no
                    AND = {
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
                }
            }

            on_execute = {
                effect = {
                    activate_technology = post_nelsonian_thought
                    set_country_flag = using_foreign_shipyards

                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }

    foreign_artillery = {
        no_foreign_artillery = {
        }
        yes_foreign_artillery = {
            technology_cost = 11000
            civilization_progress_modifier = 0.1

            on_execute = {
                effect = {
                    activate_technology = bronze_muzzle_loaded_artillery
                    set_country_flag = using_foreign_artillery
                    any_pop = {
                        scaled_militancy = {
                            ideology = liberal
                            factor = 2
                        }
                        scaled_militancy = {
                            ideology = conservative
                            factor = 1
                        }
                        scaled_militancy = {
                            ideology = reactionary
                            factor = 3
                        }
                    }
                }
            }
        }
    }
}
